var Tile=function(a,b,c){var d=this;d.ctx=a,d.img=b,d.img.onClick=d.onclick,d.clipIndex=c,d.clip=null,d.size=null,d.pos=null,d.hidden=!1,d.velocity=1.5,d.acceleration=.001,d.exitAnimation=null,d.padding=5,d.startPos=null,d.setClip=function(a){d.clip=a},d.setSize=function(a){d.size=a},d.setPos=function(a){d.pos=a,d.startPos=new Position(a.x,a.y)},d.setHidden=function(a){d.hidden=a},d.draw=function(){d.ctx.clearRect(d.pos.x,d.pos.y,d.size.width,d.size.height),d.hidden||d.ctx.drawImage(d.img,d.clip.pos.x,d.clip.pos.y,d.clip.size.width,d.clip.size.height,d.pos.x+d.padding,d.pos.y+d.padding,d.size.width-2*d.padding,d.size.height-2*d.padding)},d.animateMove=function(a,b){var c=(new Date).getTime(),e=new Position(d.pos.x,d.pos.y);d.requestMoveAnimationFrame(c,e,a,b)},d.requestMoveAnimationFrame=function(a,b,c,e){var f=(new Date).getTime()-a;d.updatePos(f,c,b),d.draw(),d.exitAnimation?e():window.requestAnimationFrame(function(){d.requestMoveAnimationFrame(a,b,c,e)})},d.updatePos=function(a,b,c){b==Directions.RIGHT?d.updatePosRight(a,c):b==Directions.LEFT?d.updatePosLeft(a,c):b==Directions.UP?d.updatePosUp(a,c):b==Directions.DOWN&&d.updatePosDown(a,c)},d.updatePosRight=function(a,b){var c=b.x+a*(d.velocity+d.acceleration*a/2);d.exitAnimation=c>d.startPos.x+d.size.width,d.exitAnimation?d.pos.x=d.startPos.x+d.size.width:d.pos.x=c,d.ctx.clearRect(b.x,d.pos.y,d.size.width,d.size.height)},d.updatePosLeft=function(a,b){var c=b.x-a*(d.velocity+d.acceleration*a/2);d.exitAnimation=c<d.startPos.x-d.size.width,d.exitAnimation?d.pos.x=d.startPos.x-d.size.width:d.pos.x=c,d.ctx.clearRect(b.x,d.pos.y,d.size.width,d.size.height)},d.updatePosUp=function(a,b){var c=b.y-a*(d.velocity+d.acceleration*a/2);d.exitAnimation=c<d.startPos.y-d.size.height,d.exitAnimation?d.pos.y=d.startPos.y-d.size.height:d.pos.y=c,d.ctx.clearRect(d.pos.x,b.y,d.size.width,d.size.height)},d.updatePosDown=function(a,b){var c=b.y+a*(d.velocity+d.acceleration*a/2);d.exitAnimation=c>d.startPos.y+d.size.height,d.exitAnimation?d.pos.y=d.startPos.y+d.size.height:d.pos.y=c,d.ctx.clearRect(d.pos.x,b.y,d.size.width,d.size.height)},d.clear=function(){d.ctx.clearRect(d.pos.x+d.padding,d.pos.y+d.padding,d.size.width-2*d.padding,d.size.height-2*d.padding)},d.move=function(a,b,c,e){e==Directions.RIGHT?d.moveRight(a,b,c):e==Directions.LEFT?d.moveLeft(a,b,c):e==Directions.UP?d.moveUp(a,b,c):e==Directions.DOWN&&d.moveDown(a,b,c)},d.moveRight=function(a,b,c){var e=a.x+b.x-c.x;e<d.startPos.x?d.pos=new Position(d.startPos.x,a.y):e>d.startPos.x+d.size.width?d.pos=new Position(d.startPos.x+d.size.width,a.y):d.pos=new Position(e,a.y),d.ctx.clearRect(a.x,d.pos.y,2*d.size.width,d.size.height)},d.moveLeft=function(a,b,c){var e=a.x-(c.x-b.x);e>d.startPos.x?d.pos=new Position(d.startPos.x,a.y):e<d.startPos.x-d.size.width?d.pos=new Position(d.startPos.x-d.size.width,a.y):d.pos=new Position(e,a.y),d.ctx.clearRect(a.x-d.size.width,d.pos.y,2*d.size.width,d.size.height)},d.moveUp=function(a,b,c){var e=a.y-(c.y-b.y);e>d.startPos.y?d.pos=new Position(a.x,d.startPos.y):e<d.startPos.y-d.size.height?d.pos=new Position(a.x,d.startPos.y-d.size.height):d.pos=new Position(a.x,e),d.ctx.clearRect(d.pos.x,a.y-d.size.height,d.size.width,2*d.size.height)},d.moveDown=function(a,b,c){var e=a.y+b.y-c.y;e<d.startPos.y?d.pos=new Position(a.x,d.startPos.y):e>d.startPos.y+d.size.height?d.pos=new Position(a.x,d.startPos.y+d.size.height):d.pos=new Position(a.x,e),d.ctx.clearRect(d.pos.x,a.y,d.size.width,2*d.size.height)}};